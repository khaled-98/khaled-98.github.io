---
layout: post
title:  "Monte Carlo Localisation (MCL) - Part 1: Bayesian Estimation"
date:   2021-01-09 21:00:00 +0000
categories: robotics localisation
math: true
---
_Note: This post is work in progress._

In this series of posts, I'll be explaining the Monte Carlo Localisation algorithm, its components and some of its variants through interactive demos.

This particular post will introduce the localisation problem briefly and how bayesian estimation can be used to solve it.

# The Localisation Problem

In order for a robot to know where it is in an environment that lacks a global positioning system (e.g. indoors where GPS is not available), it must rely on its sensors to localise itself. However, most sensors suffer from errors that can build over time, for example inertial sensors drift over time and encoders can build up errors when wheels slip.

As a result of these problems, an effective localisation algorithm must be able to correct for these errors. One way to achieve this, is by thinking about the position of the robot probabilisticly rather than deterministically. This means modelling the position of the robot using a probability distribution that reflects the uncertainty introduced by sensing errors. This probability distribution can be updated over time to incorporate new data as it becomes available. Enter Bayesian Estimation!

# Bayesian Estimation

I will not go into the detail of how Bayes Theorem works here because others have done a much better job at explaining it than I can (I recommend [3Blue1Brown's](https://www.youtube.com/channel/UCYO_jab_esuFRV4b17AJtAw) video, embedded below.) Instead I'll focus on how the theorem can be used for robot localisation.

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/HZGCoVF3YvM" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

Put simply, Bayes Theorem, shown below, describes the probability of an event (A) occurring, given our prior knowledge about the event (B). 

$$P(A|B) = \frac{P(B|A) \cdot P(A)}{P(B)}$$

The same theorem can also be used to express the probability of an event (A) occurring, given multiple other events (B and C):

$$P(A|B,C) = \frac{P(B|A,C) \cdot P(A|C)}{P(B|C)}$$

In the context of robot localisation events A, B and C can be defined as follows:

* **A**: The location of the robot at time $t$, $x_t$.
* **B**: A series of sensor readings observed by the robot up to time $t$, $z_{1:t}$.
* **C**: A series of actions taken by the robot up to time $t$, $u_{1:t}$.

$$P(x_t|z_{1:t},u_{1:t}) = \frac{P(z_{1:t}|x_t,u_{1:t}) \cdot P(x_t|u_{1:t})}{P(z_{1:t}|u_{1:t})} = \frac{P(z_t|x_t,z_{1:t-1},u_{1:t}) \cdot P(x_t|u_{1:t})}{P(z_t|z_{1:t-1}, u_{1:t})}$$

In other words, what is the probability that the robot is at location $x$ at time $t$ given all the actions it took and all the observations it made up to time $t$. 

{% include bayes_localisation.html %}
